# 灯塔微光墙梦幻化升级

## 设计理念

将微光墙改造为与整体系统一致的**梦幻气泡UI**，在深色星空背景下，以温暖的光晕效果呈现匿名祝福。

## 核心改进

### 1. MicrolightBubble（微光气泡组件）

#### 填充式动画
```typescript
opacity: 0 → 1 (2000ms, 错开延迟)
scale: 0.9 → 1 (2500ms, 错开延迟)  
blur: 15 → 0 (2300ms, 错开延迟)
```

#### 级联效果
- 每个气泡延迟 `index * 150ms` 出现
- 形成优雅的渐进显现效果
- 如同星光逐个点亮

#### 多层光晕结构
1. **外层光晕**（最大范围）
   - 范围：-8px 扩展
   - 颜色：`colors.lighthouse.light`
   - 透明度：`0.08`
   - 阴影：`shadowRadius: 16, shadowOpacity: 0.3`

2. **中层光晕**（过渡层）
   - 范围：-4px 扩展
   - 透明度：`0.12`

3. **内容层**（主体）
   - 背景：`rgba(255, 255, 255, 0.06)` 极其微弱
   - 毛玻璃：`blur(20px)`
   - 边框：`rgba(255, 229, 160, 0.15)` 几乎不可见

### 2. 视觉细节

#### 文字样式
- 主文本透明度：`0.85`
- 时间戳透明度：`0.4`
- 字间距：`0.3` / `0.5`
- 行高：`24`

#### 深色背景适配
- 在 `#1A1A2E` 深色背景下
- 使用暖黄色光晕（`#FFE5A0`）
- 营造温暖、星空般的氛围

### 3. SendMicrolightModal（送微光弹窗）

#### 设计改进
- **背景**：`rgba(0, 0, 0, 0.85)` 更深的遮罩
- **容器**：`rgba(26, 26, 46, 0.95)` 半透明深色
- **边框**：`rgba(255, 229, 160, 0.15)` 微弱金色
- **输入框**：`rgba(255, 255, 255, 0.05)` 极淡背景

#### 动画类型
- 从 `slide` 改为 `fade`
- 更柔和的出现方式
- 避免突兀感

### 4. 整体页面调整

#### 微光墙区域
```typescript
wallTitle: {
  fontSize: 22,
  fontWeight: '300',  // 更轻盈
  letterSpacing: 1,   // 增加呼吸感
}

wallSubtitle: {
  fontSize: 13,
  color: 'rgba(255, 229, 160, 0.5)',
  text: '此刻的温暖祝福',
}
```

#### 发送按钮
- 增加光晕阴影：`shadowRadius: 16`
- 调整间距：`marginTop: 32`
- 添加字间距：`letterSpacing: 1`

## 技术实现

### 新增组件

1. **`src/components/lighthouse/MicrolightBubble.tsx`**
   - 单个微光消息气泡
   - 自动格式化时间
   - 级联动画效果

2. **`src/components/lighthouse/SendMicrolightModal.tsx`**
   - 送微光弹窗
   - 梦幻风格设计
   - 独立封装

### 修改文件

- **`app/lighthouse.tsx`**
  - 导入新组件
  - 简化主文件逻辑
  - 移除冗余样式

## 视觉对比

### 改造前
```
简单卡片式
- 硬边框
- 单层背景
- 立即显示
- 统一样式
```

### 改造后
```
梦幻气泡式
- 多层光晕
- 渐进显现
- 级联动画
- 深度层次
```

## 动画时间轴

### 单个气泡
```
0ms:    开始（不可见）
+150ms: 第一个气泡开始显现
+300ms: 第二个气泡开始显现
+450ms: 第三个气泡开始显现
...
```

### 单气泡内部
```
delayBase + 0ms:    opacity 开始 (2000ms)
delayBase + 100ms:  scale 开始 (2500ms)
delayBase + 200ms:  blur 开始 (2300ms)
```

## 交互细节

### 1. 滚动体验
- 气泡之间间距：`16px`
- 外层光晕不重叠
- 平滑滚动

### 2. 新消息出现
- 插入到列表顶部
- 自动获得 `index: 0`
- 最先显现

### 3. 深色模式适配
- 已针对深色背景优化
- 使用温暖色调平衡
- 避免刺眼对比

## 心理学考量

### 温暖感
- 暖黄色光晕（`#FFE5A0`）
- 柔和的透明度
- 如同烛光般温暖

### 空间感
- 多层光晕营造深度
- 气泡悬浮效果
- 梦幻、不真实的美感

### 陪伴感
- 气泡逐个显现
- 不是孤单的一条
- 集体的温暖存在

## 性能优化

### 动画优化
- 使用 `useSharedValue` 和 `useAnimatedStyle`
- GPU 加速
- 避免重复渲染

### 渲染优化
- 组件独立封装
- 列表使用 `key={msg.id}`
- 避免不必要的重新计算

## 未来可能的增强

### 可选功能
- [ ] 气泡点击展开详情
- [ ] 长按复制文本
- [ ] 滑动删除（管理员）
- [ ] 主题色随时间变化

### 保持克制
- ✓ 不添加点赞功能
- ✓ 不添加评论功能
- ✓ 保持匿名性
- ✓ 避免社交压力

## 使用体验

### 用户视角
1. 进入灯塔页面
2. 看到灯塔旋转、光点闪烁
3. 向下滚动到微光墙
4. 气泡逐个柔和显现
5. 感受到温暖、梦幻的氛围
6. 点击"送一束微光"
7. 弹窗淡入
8. 留下祝福或留空
9. 新气泡出现在顶部

### 情感体验
- **温暖**：如同星空下的烛光
- **梦幻**：不真实但美好
- **陪伴**：看到他人的祝福
- **轻松**：无压力的存在

---

**设计目标**：  
让微光墙不仅是信息展示，更是一种情绪体验。
